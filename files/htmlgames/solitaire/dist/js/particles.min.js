function randRange(b,a){return randomNum=Math.floor(Math.random()*(a-b+1))+b}function Fly(a,c){this.x=a;this.y=c;this.flocon=jQuery("<div/>").css({opacity:0}).appendTo("#playground");this.nextParticle=null;this.visible=true;var b=randRange(0,30);if(b<10){this.flocon.addClass("particle1")}else{if(b<20){this.flocon.addClass("particle2")}else{this.flocon.addClass("particle3")}}this.maxX=-16*3}Fly.prototype.move=function(){if(!this.visible){return}this.a+=(Math.random()*0.1)-0.05;this.a*=0.9;this.angle+=this.a;this.y+=Math.abs(Math.sin(this.angle)*2);this.x+=Math.cos(this.angle)*5;var a=this.x,b=this.y;if(a>1024||a<this.maxX||b>800||b<0){this.hide();return}if(this.off==true){if(this.alpha>0){this.alpha-=0.02}else{this.hide();return}}else{if(this.alpha<1){this.alpha+=0.05}}this.flocon.css({left:a+"px",top:b+"px",opacity:this.alpha})};Fly.prototype.hide=function(){this.visible=false;this.flocon.css("opacity",0)};Fly.prototype.setPos=function(a,b){this.x=a;this.y=b;return this};Fly.prototype.init=function(){this.a=0;this.alpha=1;this.off=true;this.angle=-1.55;this.visible=true;this.flocon.css({left:this.x+"px",top:this.y+"px",opacity:this.alpha});this.angle=-1.55};var Particles={ctx:null,interval:null,firstParticle:null,maxFly:0,init:function(c){this.maxFly=c;var d=this.firstParticle=new Fly(0,0);for(var b=0,a=c;b<a;b++){d.nextParticle=new Fly(0,0);d=d.nextParticle;d.nextParticle=new Fly(0,0);d=d.nextParticle;d.nextParticle=new Fly(0,0);d=d.nextParticle;d.nextParticle=new Fly(0,0);d=d.nextParticle}},updateParticles:function(){var a=0,b=this.firstParticle;while(b){if(b.visible){b.move();a++}b=b.nextParticle}if(a==0){clearInterval(this.interval);this.interval=null}},launchParticles:function(c){var b=c.x-20,a=c.x+96,e=c.y-10,d=c.y+126,f=this.firstParticle;if(this.interval){clearInterval(this.interval);this.interval=null}while(f){f.x=randRange(b,a);f.y=randRange(e,d);f.init();f=f.nextParticle}this.interval=setInterval(jQuery.proxy(this.updateParticles,this),30)}};